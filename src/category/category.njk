---
pagination:
  data: collections.categoryList   # array of { key, name, count, items }
  size: 1
  alias: cat
permalink: /category/{{ cat.key }}/index.html
layout: layouts/base.njk
eleventyComputed:
  title: "{{ cat.name }}"
---

{% macro Card(post) %}
<article class="card">
  <a href="{{ post.url }}" class="thumb" aria-label="{{ post.data.title }}">
    <img src="{{ post.data.image or '/assets/fallback-thumb.jpg' }}"
         alt="{{ post.data.title | safe }}" loading="lazy" decoding="async"
         width="600" height="338">
  </a>
  <div class="meta">
    <h3 class="hed"><a href="{{ post.url }}">{{ post.data.title }}</a></h3>
    {% if post.date %}
      <time datetime="{{ post.date | isoDate }}">{{ post.date | displayDate('en-US') }}</time>
    {% endif %}
  </div>
</article>
{% endmacro %}

<header class="section-head" style="margin: .5rem 0 1rem;">
  <h1 style="margin:0">{{ cat.name }}</h1>
  <span class="meta">{{ cat.count }} article{% if cat.count != 1 %}s{% endif %}</span>
</header>

<div class="grid">
  {% for post in cat.items %}
    {{ Card(post) | safe }}
  {% else %}
    <p class="muted">No articles yet in this section.</p>
  {% endfor %}
</div>
